<UserControl
  x:Class="Oscilloscope.SelectVariable"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:local="clr-namespace:Oscilloscope"
  xmlns:vm="clr-namespace:Oscilloscope.ViewModels"
  xmlns:hc="https://handyorg.github.io/handycontrol"
  d:DataContext="{d:DesignInstance Type=vm:SelectVariableViewModel}"
  mc:Ignorable="d"
  MinWidth="400"
>
  <Border
    Background="{DynamicResource RegionBrush}"
    CornerRadius="20"
    BorderThickness="1"
    BorderBrush="{DynamicResource BorderBrush}"
    Padding="20"
    Margin="20"
  >
    <DockPanel>
      <DockPanel DockPanel.Dock="Top">
        <Button
          Margin="10,0,0,0"
          DockPanel.Dock="Right"
          Style="{StaticResource ButtonInfo}"
          hc:IconElement.Geometry="{StaticResource SearchGeometry}"
          Command="{Binding FilterCommand}"
        />
        <TextBox Text="{Binding Name}" />
      </DockPanel>
      <DockPanel DockPanel.Dock="Bottom">
        <Button
          Style="{StaticResource ButtonPrimary}"
          DockPanel.Dock="Right"
          Content="确定"
          Command="{Binding OkCommand}"
        />
        <Button
          Style="{StaticResource ButtonDanger}"
          DockPanel.Dock="Right"
          Margin="10,0"
          Content="取消"
          Command="{Binding CancelCommand}"
        />
        <TextBox Text="{Binding DisplayName}" />
      </DockPanel>
      <TreeView
        Margin="0,10"
        ItemsSource="{Binding FilteredVariableTree}"
        SelectedItemChanged="TreeViewSelectedItemChanged"
      >
        <TreeView.ItemTemplate>
          <HierarchicalDataTemplate
            DataType="local:VariableTreeNode"
            ItemsSource="{Binding Children}"
          >
            <TextBlock Text="{Binding Variable.Name}" />
          </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
      </TreeView>
    </DockPanel>
  </Border>
</UserControl>
